<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AvaMessaging</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
    <meta name="format-detection" content="telephone=no">
</head>
<body>
    <div class="app-container">
        <!-- Chat List View -->
        <div class="view-wrapper" id="chat-list-view">
            <header class="app-header">
                <h1 class="app-title">Messages</h1>
                <div class="header-icons">
                    <i class="fas fa-sync" id="sync-contacts-button" title="Sync contacts"></i>
                    <i class="fas fa-ellipsis-v" id="settings-button"></i>
                </div>
                
                <!-- Settings Modal -->
                <div class="modal hidden" id="settings-modal">
                    <div class="modal-content">
                        <div class="modal-header">
                            <h2>Settings</h2>
                            <span class="close-modal" id="close-settings">&times;</span>
                        </div>
                        
                        <div class="settings-section">
                            <h3><i class="fas fa-robot"></i> Groq API Settings</h3>
                            <div class="setting-item">
                                <label for="groq-api-key">Groq API Key:</label>
                                <input type="password" id="groq-api-key" placeholder="Enter your Groq API key">
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3><i class="fas fa-brain"></i> AI Training</h3>
                            <div class="setting-item">
                                <label for="ai-training">AI Training Text:</label>
                                <textarea id="ai-training" placeholder="Enter training information about yourself..."></textarea>
                            </div>
                        </div>
                        
                        <div class="settings-section">
                            <h3><i class="fas fa-clock"></i> AI Schedule</h3>
                            <div class="setting-item">
                                <label for="ai-schedule">Daily Schedule:</label>
                                <textarea id="ai-schedule" placeholder="e.g., 9AM-12PM: Work meetings&#10;1PM-5PM: Available for chat&#10;6PM-10PM: Family time"></textarea>
                            </div>
                        </div>

                        <div class="settings-section">
                            <h3><i class="fas fa-palette"></i> Theme</h3>
                            <div class="setting-item">
                                <div class="theme-selector">
                                    <button class="theme-selector-btn" id="theme-selector-btn">
                                        <span class="theme-icon" id="theme-icon">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="14" height="14"><path fill="currentColor" d="M320 96C241.5 96 176 146.5 144 216C184.4 216 220.7 233.3 248.8 261.2C267.3 279.7 293.3 279.7 311.8 261.2C330.3 242.7 356.3 242.7 374.8 261.2C402.9 289.3 439.2 306.6 479.6 306.6C497.1 306.6 511.2 294.5 520.4 279.3C522.9 275.3 527.3 273 532 273C537.3 273 542.2 276 544 280.5C560.4 307.5 570.7 340.7 570.7 376C570.7 444.5 514.2 501 445.7 501C381.8 501 328.9 449.9 326.2 386.3C325.8 376.8 317.4 369.4 307.9 369.4C298.3 369.4 289.9 376.8 289.6 386.4C286.7 436.7 243.9 477.2 193.4 477.2C125.7 477.2 70.4 421.9 70.4 354.2C70.4 296.3 111.5 246.4 163.7 232.4C148.8 168.4 196.3 114.9 261.4 106.7C278.1 105.1 292.3 93.5 296.2 77.3C296.8 75.5 298.4 74 300.3 74C302.5 74 304.6 75.3 305.7 77.3C312.5 90.6 329.2 98.5 346.4 98.5C382.5 98.5 412.1 86.3 432.9 66.2C443.8 55.4 458.5 50.3 474.1 50.3C493.4 50.3 511 59 522.9 73.2C545.1 100.2 555.3 134.5 555.3 170.8C555.3 240.2 498 297.5 428.6 297.5C406.5 297.5 385.4 291.5 366.3 280.8C353.4 273.3 337.4 273.3 324.5 280.8C311.6 288.3 302.9 302.3 302.9 317.2C302.9 332.1 311.6 346.1 324.5 353.6C343.6 364.3 364.7 370.3 386.8 370.3C446 370.3 494.2 322.1 494.2 262.9C494.2 239.5 487.2 217.2 475.1 198.3C463 179.4 445.8 165.1 424.7 156.9C411.6 151.8 400.6 143.2 392.6 131.7C380.9 114.9 376.6 94.1 380.8 73.8C381.5 69.9 385.1 67 389 67C393.4 67 397.4 70.1 397.8 74.5C400.5 91.7 409.1 107.5 422.5 119.1C441.1 135.2 464.6 144.2 489.2 144.2C525.3 144.2 556.4 127.5 577.2 102.1C582.8 95.2 590.6 91.2 599 91.2C608.4 91.2 617 96.3 620.9 104.7C630.5 125.1 635.7 148.4 635.7 173.3C635.7 243.6 578.3 301 508 301C469.5 301 435.1 285.5 410.2 259.8C394.3 243.2 368.3 243.2 352.4 259.8C336.5 276.4 336.5 302.4 352.4 318.9C360.7 327.2 371.3 331.7 382.4 331.7C393.5 331.7 404.1 327.2 412.4 318.9C428.3 303.2 452.2 303.2 468.1 318.9C491.1 341.9 491.1 379.4 468.1 402.4C437.1 433.4 393.1 451.7 346.4 451.7C271.8 451.7 210.4 390.3 210.4 315.7C210.4 302.1 211.8 288.7 214.5 275.7C215.5 270.6 219.7 267 225 267H262.5C268 267 272.5 270.5 273 276C275.2 291.5 283.6 305.7 296.3 316.1C313.5 330.5 335.8 338.7 359.3 338.7C411.5 338.7 455.1 299.9 462.6 249.3C463.1 245.5 466.7 242.7 470.6 242.7C474.9 242.7 478.6 245.8 479.2 250C481.8 264.5 483.5 279.4 483.5 294.5C483.5 355.6 434.4 404.7 373.3 404.7C334.9 404.7 300.5 388.8 275.9 362.8C260 346.9 234 346.9 218.1 362.8C202.2 378.7 202.2 404.7 218.1 420.6C226.4 428.9 237 433.4 248.1 433.4C259.2 433.4 269.8 428.9 278.1 420.6C294 404.7 318 404.7 333.9 420.6C356.9 443.6 356.9 481.1 333.9 504.1C319.5 518.5 300.4 526.7 280.4 526.7C260.4 526.7 240.3 518.5 225.9 504.1C199.3 477.5 199.3 435.1 225.9 408.5C241.8 392.6 241.8 366.6 225.9 350.7C217.6 342.4 207 337.9 195.9 337.9C184.8 337.9 174.2 342.4 165.9 350.7C150 366.6 150 392.6 165.9 408.5C173.6 416.2 183.7 419.9 194.2 419.9C204.7 419.9 214.8 416.2 222.5 408.5C239.7 391.3 264.7 391.3 281.9 408.5C307.1 433.7 307.1 477.5 281.9 502.7C267.9 516.7 249.4 524.1 229.8 524.1C210.2 524.1 190.7 516.7 176.7 502.7C150.1 476.1 150.1 433.7 176.7 407.1C193.9 389.9 218.9 389.9 236.1 407.1C260.5 431.5 260.5 474.5 236.1 498.9C222.1 512.9 203.6 520.3 184 520.3C164.4 520.3 145.9 512.9 131.9 498.9C105.3 472.3 105.3 429.9 131.9 403.3C149.1 386.1 174.1 386.1 191.3 403.3C215.7 427.7 215.7 470.7 191.3 495.1C177.3 509.1 158.8 516.5 139.2 516.5C119.6 516.5 101.1 509.1 87.1 495.1C60.5 468.5 60.5 426.1 87.1 399.5C104.3 382.3 129.3 382.3 146.5 399.5C170.9 423.9 170.9 466.9 146.5 491.3C132.5 505.3 114 512.7 94.4 512.7C74.8 512.7 56.3 505.3 42.3 491.3C15.7 464.7 15.7 422.3 42.3 395.7C59.5 378.5 84.5 378.5 101.7 395.7C126.1 420.1 126.1 463.1 101.7 487.5C87.7 501.5 69.2 508.9 49.6 508.9C30 508.9 11.5 501.5 -2.5 487.5C-29.1 460.9 -29.1 418.5 -2.5 391.9C14.7 374.7 39.7 374.7 56.9 391.9C81.3 416.3 81.3 459.3 56.9 483.7C42.9 497.7 24.4 505.1 4.8 505.1C-14.8 505.1 -33.3 497.7 -47.3 483.7C-73.9 457.1 -73.9 414.7 -47.3 388.1C-30.1 370.9 -5.1 370.9 12.1 388.1C36.5 412.5 36.5 455.5 12.1 479.9C-1.9 493.9 -20.4 501.3 -40 501.3C-59.6 501.3 -78.1 493.9 -92.1 479.9C-118.7 453.3 -118.7 410.9 -92.1 384.3C-74.9 367.1 -49.9 367.1 -32.7 384.3C-8.3 408.7 -8.3 451.7 -32.7 476.1C-46.7 490.1 -65.2 497.5 -84.8 497.5C-104.4 497.5 -122.9 490.1 -136.9 476.1C-163.5 449.5 -163.5 407.1 -136.9 380.5C-119.7 363.3 -94.7 363.3 -77.5 380.5C-53.1 404.9 -53.1 447.9 -77.5 472.3C-91.5 486.3 -110 493.7 -129.6 493.7C-149.2 493.7 -167.7 486.3 -181.7 472.3C-208.3 445.7 -208.3 403.3 -181.7 376.7C-164.5 359.5 -139.5 359.5 -122.3 376.7C-97.9 401.1 -97.9 444.1 -122.3 468.5C-136.3 482.5 -154.8 489.9 -174.4 489.9C-194 489.9 -212.5 482.5 -226.5 468.5C-253.1 441.9 -253.1 399.5 -226.5 372.9C-209.3 355.7 -184.3 355.7 -167.1 372.9C-142.7 397.3 -142.7 440.3 -167.1 464.7C-181.1 478.7 -199.6 486.1 -219.2 486.1C-238.8 486.1 -257.3 478.7 -271.3 464.7C-297.9 438.1 -297.9 395.7 -271.3 369.1C-254.1 351.9 -229.1 351.9 -211.9 369.1C-187.5 393.5 -187.5 436.5 -211.9 460.9C-225.9 474.9 -244.4 482.3 -264 482.3C-283.6 482.3 -302.1 474.9 -316.1 460.9C-342.7 434.3 -342.7 391.9 -316.1 365.3C-298.9 348.1 -273.9 348.1 -256.7 365.3C-232.3 389.7 -232.3 432.7 -256.7 457.1C-270.7 471.1 -289.2 478.5 -308.8 478.5C-328.4 478.5 -346.9 471.1 -360.9 457.1C-387.5 430.5 -387.5 388.1 -360.9 361.5C-343.7 344.3 -318.7 344.3 -301.5 361.5C-277.1 385.9 -277.1 428.9 -301.5 453.3C-315.5 467.3 -334 474.7 -353.6 474.7C-373.2 474.7 -391.7 467.3 -405.7 453.3C-432.3 426.7 -432.3 384.3 -405.7 357.7C-388.5 340.5 -363.5 340.5 -346.3 357.7C-321.9 382.1 -321.9 425.1 -346.3 449.5C-360.3 463.5 -378.8 470.9 -398.4 470.9C-418 470.9 -436.5 463.5 -450.5 449.5C-477.1 422.9 -477.1 380.5 -450.5 353.9C-433.3 336.7 -408.3 336.7 -391.1 353.9C-366.7 378.3 -366.7 421.3 -391.1 445.7C-405.1 459.7 -423.6 467.1 -443.2 467.1C-462.8 467.1 -481.3 459.7 -495.3 445.7C-521.9 419.1 -521.9 376.7 -495.3 350.1C-478.1 332.9 -453.1 332.9 -435.9 350.1C-411.5 374.5 -411.5 417.5 -435.9 441.9C-449.9 455.9 -468.4 463.3 -488 463.3C-507.6 463.3 -526.1 455.9 -540.1 441.9C-566.7 415.3 -566.7 372.9 -540.1 346.3C-522.9 329.1 -497.9 329.1 -480.7 346.3C-456.3 370.7 -456.3 413.7 -480.7 438.1C-494.7 452.1 -513.2 459.5 -532.8 459.5C-552.4 459.5 -570.9 452.1 -584.9 438.1C-611.5 411.5 -611.5 369.1 -584.9 342.5C-567.7 325.3 -542.7 325.3 -525.5 342.5C-501.1 366.9 -501.1 409.9 -525.5 434.3C-539.5 448.3 -558 455.7 -577.6 455.7C-597.2 455.7 -615.7 448.3 -629.7 434.3C-656.3 407.7 -656.3 365.3 -629.7 338.7C-612.5 321.5 -587.5 321.5 -570.3 338.7C-545.9 363.1 -545.9 406.1 -570.3 430.5C-584.3 444.5 -602.8 451.9 -622.4 451.9C-642 451.9 -660.5 444.3 -674.5 430.5"/></svg>
                                        </span>
                                        <span class="theme-label" id="theme-label">Kawaii</span>
                                        <svg class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" width="10" height="10"><path fill="currentColor" d="M137 384c9.6 0 18.7-5.3 22.7-14l28-60.3c2.8-6 1.7-12.9-3.1-17.5s-10.4-5.4-14.6-2.3L137 315.7 60.9 292.1c-4.3-3-9.9-3.4-14.6-2.3s-5.9 11.5-3.1 17.5l28 60.3c4 8.7 13.1 14 22.7 14z"/></svg>
                                    </button>
                                    <div class="theme-dropdown-menu" id="theme-dropdown-menu">
                                        <button class="theme-option active" data-value="kawaii">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16"><path fill="currentColor" d="M320 96C241.5 96 176 146.5 144 216C184.4 216 220.7 233.3 248.8 261.2C267.3 279.7 293.3 279.7 311.8 261.2C330.3 242.7 356.3 242.7 374.8 261.2C402.9 289.3 439.2 306.6 479.6 306.6C497.1 306.6 511.2 294.5 520.4 279.3C522.9 275.3 527.3 273 532 273C537.3 273 542.2 276 544 280.5C560.4 307.5 570.7 340.7 570.7 376C570.7 444.5 514.2 501 445.7 501C381.8 501 328.9 449.9 326.2 386.3C325.8 376.8 317.4 369.4 307.9 369.4C298.3 369.4 289.9 376.8 289.6 386.4C286.7 436.7 243.9 477.2 193.4 477.2C125.7 477.2 70.4 421.9 70.4 354.2C70.4 296.3 111.5 246.4 163.7 232.4C148.8 168.4 196.3 114.9 261.4 106.7C278.1 105.1 292.3 93.5 296.2 77.3C296.8 75.5 298.4 74 300.3 74C302.5 74 304.6 75.3 305.7 77.3C312.5 90.6 329.2 98.5 346.4 98.5C382.5 98.5 412.1 86.3 432.9 66.2C443.8 55.4 458.5 50.3 474.1 50.3C493.4 50.3 511 59 522.9 73.2C545.1 100.2 555.3 134.5 555.3 170.8C555.3 240.2 498 297.5 428.6 297.5C406.5 297.5 385.4 291.5 366.3 280.8C353.4 273.3 337.4 273.3 324.5 280.8C311.6 288.3 302.9 302.3 302.9 317.2C302.9 332.1 311.6 346.1 324.5 353.6C343.6 364.3 364.7 370.3 386.8 370.3C446 370.3 494.2 322.1 494.2 262.9C494.2 239.5 487.2 217.2 475.1 198.3C463 179.4 445.8 165.1 424.7 156.9C411.6 151.8 400.6 143.2 392.6 131.7C380.9 114.9 376.6 94.1 380.8 73.8C381.5 69.9 385.1 67 389 67C393.4 67 397.4 70.1 397.8 74.5C400.5 91.7 409.1 107.5 422.5 119.1C441.1 135.2 464.6 144.2 489.2 144.2C525.3 144.2 556.4 127.5 577.2 102.1C582.8 95.2 590.6 91.2 599 91.2C608.4 91.2 617 96.3 620.9 104.7C630.5 125.1 635.7 148.4 635.7 173.3C635.7 243.6 578.3 301 508 301C469.5 301 435.1 285.5 410.2 259.8C394.3 243.2 368.3 243.2 352.4 259.8C336.5 276.4 336.5 302.4 352.4 318.9C360.7 327.2 371.3 331.7 382.4 331.7C393.5 331.7 404.1 327.2 412.4 318.9C428.3 303.2 452.2 303.2 468.1 318.9C491.1 341.9 491.1 379.4 468.1 402.4C437.1 433.4 393.1 451.7 346.4 451.7C271.8 451.7 210.4 390.3 210.4 315.7C210.4 302.1 211.8 288.7 214.5 275.7C215.5 270.6 219.7 267 225 267H262.5C268 267 272.5 270.5 273 276C275.2 291.5 283.6 305.7 296.3 316.1C313.5 330.5 335.8 338.7 359.3 338.7C411.5 338.7 455.1 299.9 462.6 249.3C463.1 245.5 466.7 242.7 470.6 242.7C474.9 242.7 478.6 245.8 479.2 250C481.8 264.5 483.5 279.4 483.5 294.5C483.5 355.6 434.4 404.7 373.3 404.7C334.9 404.7 300.5 388.8 275.9 362.8C260 346.9 234 346.9 218.1 362.8C202.2 378.7 202.2 404.7 218.1 420.6C226.4 428.9 237 433.4 248.1 433.4C259.2 433.4 269.8 428.9 278.1 420.6C294 404.7 318 404.7 333.9 420.6C356.9 443.6 356.9 481.1 333.9 504.1C319.5 518.5 300.4 526.7 280.4 526.7C260.4 526.7 240.3 518.5 225.9 504.1C199.3 477.5 199.3 435.1 225.9 408.5C241.8 392.6 241.8 366.6 225.9 350.7C217.6 342.4 207 337.9 195.9 337.9C184.8 337.9 174.2 342.4 165.9 350.7C150 366.6 150 392.6 165.9 408.5C173.6 416.2 183.7 419.9 194.2 419.9C204.7 419.9 214.8 416.2 222.5 408.5C239.7 391.3 264.7 391.3 281.9 408.5C307.1 433.7 307.1 477.5 281.9 502.7C267.9 516.7 249.4 524.1 229.8 524.1C210.2 524.1 190.7 516.7 176.7 502.7C150.1 476.1 150.1 433.7 176.7 407.1C193.9 389.9 218.9 389.9 236.1 407.1C260.5 431.5 260.5 474.5 236.1 498.9C222.1 512.9 203.6 520.3 184 520.3C164.4 520.3 145.9 512.9 131.9 498.9C105.3 472.3 105.3 429.9 131.9 403.3C149.1 386.1 174.1 386.1 191.3 403.3C215.7 427.7 215.7 470.7 191.3 495.1C177.3 509.1 158.8 516.5 139.2 516.5C119.6 516.5 101.1 509.1 87.1 495.1C60.5 468.5 60.5 426.1 87.1 399.5C104.3 382.3 129.3 382.3 146.5 399.5C170.9 423.9 170.9 466.9 146.5 491.3C132.5 505.3 114 512.7 94.4 512.7C74.8 512.7 56.3 505.3 42.3 491.3C15.7 464.7 15.7 422.3 42.3 395.7C59.5 378.5 84.5 378.5 101.7 395.7C126.1 420.1 126.1 463.1 101.7 487.5C87.7 501.5 69.2 508.9 49.6 508.9C30 508.9 11.5 501.5 -2.5 487.5C-29.1 460.9 -29.1 418.5 -2.5 391.9C14.7 374.7 39.7 374.7 56.9 391.9C81.3 416.3 81.3 459.3 56.9 483.7C42.9 497.7 24.4 505.1 4.8 505.1C-14.8 505.1 -33.3 497.7 -47.3 483.7C-73.9 457.1 -73.9 414.7 -47.3 388.1C-30.1 370.9 -5.1 370.9 12.1 388.1C36.5 412.5 36.5 455.5 12.1 479.9C-1.9 493.9 -20.4 501.3 -40 501.3C-59.6 501.3 -78.1 493.9 -92.1 479.9C-118.7 453.3 -118.7 410.9 -92.1 384.3C-74.9 367.1 -49.9 367.1 -32.7 384.3C-8.3 408.7 -8.3 451.7 -32.7 476.1C-46.7 490.1 -65.2 497.5 -84.8 497.5C-104.4 497.5 -122.9 490.1 -136.9 476.1C-163.5 449.5 -163.5 407.1 -136.9 380.5C-119.7 363.3 -94.7 363.3 -77.5 380.5C-53.1 404.9 -53.1 447.9 -77.5 472.3C-91.5 486.3 -110 493.7 -129.6 493.7C-149.2 493.7 -167.7 486.3 -181.7 472.3C-208.3 445.7 -208.3 403.3 -181.7 376.7C-164.5 359.5 -139.5 359.5 -122.3 376.7C-97.9 401.1 -97.9 444.1 -122.3 468.5C-136.3 482.5 -154.8 489.9 -174.4 489.9C-194 489.9 -212.5 482.3 -226.5 468.5C-253.1 441.9 -253.1 399.5 -226.5 372.9C-209.3 355.7 -184.3 355.7 -167.1 372.9C-142.7 397.3 -142.7 440.3 -167.1 464.7C-181.1 478.7 -199.6 486.1 -219.2 486.1C-238.8 486.1 -257.3 478.7 -271.3 464.7C-297.9 438.1 -297.9 395.7 -271.3 369.1C-254.1 351.9 -229.1 351.9 -211.9 369.1C-187.5 393.5 -187.5 436.5 -211.9 460.9C-225.9 474.9 -244.4 482.3 -264 482.3C-283.6 482.3 -302.1 474.9 -316.1 460.9C-342.7 434.3 -342.7 391.9 -316.1 365.3C-298.9 348.1 -273.9 348.1 -256.7 365.3C-232.3 389.7 -232.3 432.7 -256.7 457.1C-270.7 471.1 -289.2 478.5 -308.8 478.5C-328.4 478.5 -346.9 471.1 -360.9 457.1C-387.5 430.5 -387.5 388.1 -360.9 361.5C-343.7 344.3 -318.7 344.3 -301.5 361.5C-277.1 385.9 -277.1 428.9 -301.5 453.3C-315.5 467.3 -334 474.7 -353.6 474.7C-373.2 474.7 -391.7 467.3 -405.7 453.3C-432.3 426.7 -432.3 384.3 -405.7 357.7C-388.5 340.5 -363.5 340.5 -346.3 357.7C-321.9 382.1 -321.9 425.1 -346.3 449.5C-360.3 463.5 -378.8 470.9 -398.4 470.9C-418 470.9 -436.5 463.3 -450.5 449.5C-477.1 422.9 -477.1 380.5 -450.5 353.9C-433.3 336.7 -408.3 336.7 -391.1 353.9C-366.7 378.3 -366.7 421.3 -391.1 445.7C-405.1 459.7 -423.6 467.1 -443.2 467.1C-462.8 467.1 -481.3 459.7 -495.3 445.7C-521.9 419.1 -521.9 376.7 -495.3 350.1C-478.1 332.9 -453.1 332.9 -435.9 350.1C-411.5 374.5 -411.5 417.5 -435.9 441.9C-449.9 455.9 -468.4 463.3 -488 463.3C-507.6 463.3 -526.1 455.9 -540.1 441.9C-566.7 415.3 -566.7 372.9 -540.1 346.3C-522.9 329.1 -497.9 329.1 -480.7 346.3C-456.3 370.7 -456.3 413.7 -480.7 438.1C-494.7 452.1 -513.2 459.5 -532.8 459.5C-552.4 459.5 -570.9 452.1 -584.9 438.1C-611.5 411.5 -611.5 369.1 -584.9 342.5C-567.7 325.3 -542.7 325.3 -525.5 342.5C-501.1 366.9 -501.1 409.9 -525.5 434.3C-539.5 448.3 -558 455.7 -577.6 455.7C-597.2 455.7 -615.7 448.3 -629.7 434.3C-656.3 407.7 -656.3 365.3 -629.7 338.7C-612.5 321.5 -587.5 321.5 -570.3 338.7C-545.9 363.1 -545.9 406.1 -570.3 430.5C-584.3 444.5 -602.8 451.9 -622.4 451.9C-642 451.9 -660.5 444.3 -674.5 430.5"/></svg>
                                            <span>Kawaii</span>
                                        </button>
                                        <button class="theme-option" data-value="royal">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16"><path fill="currentColor" d="M352 64C352 46.3 337.7 32 320 32C302.3 32 288 46.3 288 64L288 128L192 128C139 128 96 171 96 224L96 448C96 501 139 544 192 544L448 544C501 544 544 501 544 448L544 224C544 171 501 128 448 128L352 128L352 64zM160 432C160 418.7 170.7 408 184 408L216 408C229.3 408 240 418.7 240 432C240 445.3 229.3 456 216 456L184 456C170.7 456 160 445.3 160 432zM280 432C280 418.7 290.7 408 304 408L336 408C349.3 408 360 418.7 360 432C360 445.3 349.3 456 336 456L304 456C290.7 456 280 445.3 280 432zM400 432C400 418.7 410.7 408 424 408L456 408C469.3 408 480 418.7 480 432C480 445.3 469.3 456 456 456L424 456C410.7 456 400 445.3 400 432zM224 240C250.5 240 272 261.5 272 288C272 314.5 250.5 336 224 336C197.5 336 176 314.5 176 288C176 261.5 197.5 240 224 240zM368 288C368 261.5 389.5 240 416 240C442.5 240 464 261.5 464 288C464 314.5 442.5 336 416 336C389.5 336 368 314.5 368 288zM64 288C64 270.3 49.7 256 32 256C14.3 256 0 270.3 0 288L0 384C0 401.7 14.3 416 32 416C49.7 416 64 401.7 64 384L64 288zM608 256C590.3 256 576 270.3 576 288L576 384C576 401.7 590.3 416 608 416C625.7 416 640 401.7 640 384L640 288C640 270.3 625.7 256 608 256z"/></svg>
                                            <span>Royal Dark</span>
                                        </button>
                                        <button class="theme-option" data-value="catpuccin">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16"><path fill="currentColor" d="M320 128C194.7 128 96 176.4 96 256v128c0 79.6 98.7 128 224 128s224-48.4 224-128V256c0-79.6-98.7-128-224-128zM176 280c0-57.9 69.4-88 144-88s144 30.1 144 88v32c0 57.9-69.4 88-144 88s-144-30.1-144-88v-32zm288 0c0-57.9 69.4-88 144-88s144 30.1 144 88v32c0 57.9-69.4 88-144 88s-144-30.1-144-88v-32z"/></svg>
                                            <span>Catppuccin Mocha</span>
                                        </button>
                                        <button class="theme-option" data-value="frappe">
                                            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16"><path fill="currentColor" d="M320 128C194.7 128 96 176.4 96 256v128c0 79.6 98.7 128 224 128s224-48.4 224-128V256c0-79.6-98.7-128-224-128zM176 280c0-57.9 69.4-88 144-88s144 30.1 144 88v32c0 57.9-69.4 88-144 88s-144-30.1-144-88v-32zm288 0c0-57.9 69.4-88 144-88s144 30.1 144 88v32c0 57.9-69.4 88-144 88s-144-30.1-144-88v-32z"/></svg>
                                            <span>Catppuccin Frappe</span>
                                        </button>
                                    </div>
                                </div>
                                <select id="theme-select" class="theme-select" style="display: none;">
                                    <option value="kawaii">Kawaii</option>
                                    <option value="royal">Royal Dark</option>
                                    <option value="catpuccin">Catppuccin Mocha</option>
                                    <option value="frappe">Catppuccin Frappe</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="settings-actions">
                            <button class="save-settings-btn" id="save-settings">Save Settings</button>
                        </div>
                    </div>
                </div>

                <!-- Sync Confirmation Modal -->
                <div class="modal hidden" id="sync-modal">
                    <div class="modal-content sync-modal-content">
                        <div class="modal-header">
                            <h2><i class="fas fa-sync"></i> Sync Contacts</h2>
                            <span class="close-modal" id="close-sync-modal">&times;</span>
                        </div>
                        <div class="sync-modal-body">
                            <p id="sync-contact-count">Found <strong>0</strong> contacts to sync.</p>
                            <p id="sync-est-time">Note: Syncing may take few seconds or minutes. First sync may take longer.</p>
                            <div class="sync-warning">
                                <i class="fas fa-exclamation-triangle"></i>
                                <span>Don't close the app while syncing - progress may reset!</span>
                            </div>
                            <p class="sync-note">The sync will run in the background.</p>
                        </div>
                        <div class="sync-modal-actions">
                            <button class="cancel-btn" id="cancel-sync">Cancel</button>
                            <button class="confirm-btn" id="confirm-sync">Start Sync</button>
                        </div>
                    </div>
                </div>

                <!-- Sync Error Modal -->
                <div class="modal hidden" id="sync-error-modal">
                    <div class="modal-content sync-modal-content sync-result-modal">
                        <div class="sync-result-icon error">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                        <div class="sync-result-title">Sync Failed</div>
                        <div class="sync-result-message" id="sync-error-message">Something went wrong. Please try again.</div>
                        <div class="sync-modal-actions">
                            <button class="confirm-btn" id="close-error-sync">OK</button>
                        </div>
                    </div>
                </div>

                <!-- Sync Success Modal -->
                <div class="modal hidden" id="sync-success-modal">
                    <div class="modal-content sync-modal-content sync-result-modal">
                        <div class="sync-result-icon success">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        <div class="sync-result-title">Sync Complete!</div>
                        <div class="sync-result-message" id="sync-success-message">Successfully synced contacts.</div>
                        <div class="sync-modal-actions">
                            <button class="confirm-btn" id="close-success-sync">Great!</button>
                        </div>
                    </div>
                </div>

                <!-- Delete Chat Modal -->
                <div class="modal hidden" id="delete-chat-modal">
                    <div class="modal-content sync-modal-content sync-result-modal">
                        <div class="sync-result-icon error">
                            <i class="fas fa-trash-alt"></i>
                        </div>
                        <div class="sync-result-title">Delete Chat?</div>
                        <div class="sync-result-message">Are you sure you want to delete this chat? This action cannot be undone.</div>
                        <div class="sync-modal-actions">
                            <button class="cancel-btn" id="cancel-delete-chat">Cancel</button>
                            <button class="confirm-btn delete-confirm-btn" id="confirm-delete-chat">Delete</button>
                        </div>
                    </div>
                </div>
            </header>

            <div class="search-filter-bar">
                <div class="search-box">
                    <i class="fas fa-search"></i>
                    <input type="text" placeholder="Search">
                </div>
            </div>

            <div class="chat-items-container" id="chat-items-container">
                <!-- Chat items will be dynamically loaded here -->
            </div>
        </div>

        <!-- Chat Conversation View -->
        <div class="view-wrapper hidden" id="chat-conversation-view">
            <header class="chat-header">
                <div class="back-button" id="chat-back-button"><i class="fas fa-arrow-left"></i></div>
                <img src="https://api.dicebear.com/7.x/pixel-art/svg?seed=Adrin" alt="Adrin Alimejad" class="avatar chat-header-avatar" id="current-chat-avatar">
                <div class="chat-header-info">
                    <span class="chat-header-name" id="current-chat-name">Adrin Alimejad</span>
                </div>
                <div class="chat-header-actions">
                    <div class="mode-selector">
                        <button class="mode-selector-btn" id="mode-selector-btn">
                            <span class="mode-icon" id="mode-icon">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="14" height="14"><path fill="currentColor" d="M416 208C416 305.2 330 384 224 384C197.3 384 171.9 379 148.8 370L67.2 413.2C57.9 418.1 46.5 416.4 39 409C31.5 401.6 29.8 390.1 34.8 380.8L70.4 313.6C46.3 284.2 32 247.6 32 208C32 110.8 118 32 224 32C330 32 416 110.8 416 208zM416 576C321.9 576 243.6 513.9 227.2 432C347.2 430.5 451.5 345.1 463 229.3C546.3 248.5 608 317.6 608 400C608 439.6 593.7 476.2 569.6 505.6L605.2 572.8C610.1 582.1 608.4 593.5 601 601C593.6 608.5 582.1 610.2 572.8 605.2L491.2 562C468.1 571 442.7 576 416 576z"/></svg>
                            </span>
                            <span class="mode-label" id="mode-label">Manual</span>
                            <svg class="dropdown-arrow" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 320 512" width="10" height="10"><path fill="currentColor" d="M137 384c9.6 0 18.7-5.3 22.7-14l28-60.3c2.8-6 1.7-12.9-3.1-17.5s-10.4-5.4-14.6-2.3L137 315.7 60.9 292.1c-4.3-3-9.9-3.4-14.6-2.3s-5.9 11.5-3.1 17.5l28 60.3c4 8.7 13.1 14 22.7 14z"/></svg>
                        </button>
                        <div class="mode-dropdown-menu" id="mode-dropdown-menu">
                            <button class="mode-option active" data-value="aiauto">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16"><path fill="currentColor" d="M352 64C352 46.3 337.7 32 320 32C302.3 32 288 46.3 288 64L288 128L192 128C139 128 96 171 96 224L96 448C96 501 139 544 192 544L448 544C501 544 544 501 544 448L544 224C544 171 501 128 448 128L352 128L352 64zM160 432C160 418.7 170.7 408 184 408L216 408C229.3 408 240 418.7 240 432C240 445.3 229.3 456 216 456L184 456C170.7 456 160 445.3 160 432zM280 432C280 418.7 290.7 408 304 408L336 408C349.3 408 360 418.7 360 432C360 445.3 349.3 456 336 456L304 456C290.7 456 280 445.3 280 432zM400 432C400 418.7 410.7 408 424 408L456 408C469.3 408 480 418.7 480 432C480 445.3 469.3 456 456 456L424 456C410.7 456 400 445.3 400 432zM224 240C250.5 240 272 261.5 272 288C272 314.5 250.5 336 224 336C197.5 336 176 314.5 176 288C176 261.5 197.5 240 224 240zM368 288C368 261.5 389.5 240 416 240C442.5 240 464 261.5 464 288C464 314.5 442.5 336 416 336C389.5 336 368 314.5 368 288zM64 288C64 270.3 49.7 256 32 256C14.3 256 0 270.3 0 288L0 384C0 401.7 14.3 416 32 416C49.7 416 64 401.7 64 384L64 288zM608 256C590.3 256 576 270.3 576 288L576 384C576 401.7 590.3 416 608 416C625.7 416 640 401.7 640 384L640 288C640 270.3 625.7 256 608 256z"/></svg>
                                <span>AutoAI</span>
                            </button>
                            <button class="mode-option" data-value="semiai">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16"><path fill="currentColor" d="M184 120C184 89.1 209.1 64 240 64L264 64C281.7 64 296 78.3 296 96L296 544C296 561.7 281.7 576 264 576L232 576C202.2 576 177.1 555.6 170 528C169.3 528 168.7 528 168 528C123.8 528 88 492.2 88 448C88 430 94 413.4 104 400C84.6 385.4 72 362.2 72 336C72 305.1 89.6 278.2 115.2 264.9C108.1 252.9 104 238.9 104 224C104 179.8 139.8 144 184 144L184 120zM456 120L456 144C500.2 144 536 179.8 536 224C536 239 531.9 253 524.8 264.9C550.5 278.2 568 305 568 336C568 362.2 555.4 385.4 536 400C546 413.4 552 430 552 448C552 492.2 516.2 528 472 528C471.3 528 470.7 528 470 528C462.9 555.6 437.8 576 408 576L376 576C358.3 576 344 561.7 344 544L344 96C344 78.3 358.3 64 376 64L400 64C430.9 64 456 89.1 456 120z"/></svg>
                                <span>SemiAI</span>
                            </button>
                            <button class="mode-option" data-value="manual">
                                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="16" height="16"><path fill="currentColor" d="M416 208C416 305.2 330 384 224 384C197.3 384 171.9 379 148.8 370L67.2 413.2C57.9 418.1 46.5 416.4 39 409C31.5 401.6 29.8 390.1 34.8 380.8L70.4 313.6C46.3 284.2 32 247.6 32 208C32 110.8 118 32 224 32C330 32 416 110.8 416 208zM416 576C321.9 576 243.6 513.9 227.2 432C347.2 430.5 451.5 345.1 463 229.3C546.3 248.5 608 317.6 608 400C608 439.6 593.7 476.2 569.6 505.6L605.2 572.8C610.1 582.1 608.4 593.5 601 601C593.6 608.5 582.1 610.2 572.8 605.2L491.2 562C468.1 571 442.7 576 416 576z"/></svg>
                                <span>Manual</span>
                            </button>
                        </div>
                    </div>
                    <select class="chat-mode-dropdown" id="chat-mode-dropdown" style="display: none;">
                        <option value="aiauto">AutoAI</option>
                        <option value="semiai">SemiAI</option>
                        <option value="manual">Manual</option>
                    </select>
                </div>
            </header>

            <div class="message-area" id="message-area">
                <!-- Messages will be dynamically loaded here -->
            </div>
            
            <button class="scroll-to-bottom-btn" id="scroll-to-bottom-btn" title="Back to most recent">
            </button>

            <div class="message-input-bar">
                <i class="fas fa-paperclip input-icon" id="attach-button"></i>
                <input type="text" id="message-input" placeholder="Write a message...">
                <div class="input-icons-right">
                    <div class="mode-indicator" id="mode-indicator">
                        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 640" width="12" height="12"><path fill="currentColor" d="M416 208C416 305.2 330 384 224 384C197.3 384 171.9 379 148.8 370L67.2 413.2C57.9 418.1 46.5 416.4 39 409C31.5 401.6 29.8 390.1 34.8 380.8L70.4 313.6C46.3 284.2 32 247.6 32 208C32 110.8 118 32 224 32C330 32 416 110.8 416 208zM416 576C321.9 576 243.6 513.9 227.2 432C347.2 430.5 451.5 345.1 463 229.3C546.3 248.5 608 317.6 608 400C608 439.6 593.7 476.2 569.6 505.6L605.2 572.8C610.1 582.1 608.4 593.5 601 601C593.6 608.5 582.1 610.2 572.8 605.2L491.2 562C468.1 571 442.7 576 416 576z"/></svg>
                        Manual
                    </div>
                    <i class="fas fa-paper-plane send-icon" id="send-button"></i>
                </div>
            </div>
        </div>
    </div>

    <!-- Sync Progress Bar -->
    <div class="sync-progress-bar" id="sync-progress-bar">
        <div class="sync-progress-dot"></div>
        <span class="sync-progress-text" id="sync-progress-text">Syncd 0/0 contacts...</span>
    </div>

    <!-- Link Confirmation Modal -->
    <div class="modal link-modal" id="link-modal">
        <div class="modal-content link-modal-content">
            <div class="link-modal-body">
                <div class="link-warning">
                    <i class="fas fa-exclamation-triangle"></i>
                    <span>Third-Party Link Warning</span>
                </div>
                <p>You are about to visit an external link.</p>
                <div class="link-url" id="link-url-display"></div>
                <p class="link-note">This link will open in a new tab. Are you sure you want to continue?</p>
            </div>
            <div class="link-modal-actions">
                <button class="cancel-btn" id="cancel-link">Cancel</button>
                <button class="confirm-btn" id="confirm-link">Go to Link</button>
            </div>
        </div>
    </div>

    <!-- Message Delete Context Menu -->
    <div class="message-context-menu hidden" id="message-context-menu">
        <button class="context-menu-item delete-message-me">
            <i class="fas fa-trash"></i> Delete for Me
        </button>
        <button class="context-menu-item delete-message-everyone">
            <i class="fas fa-trash-alt"></i> Delete for Everyone
        </button>
    </div>

    <!-- Settings Toast Notification -->
    <div class="toast hidden" id="settings-toast">
        <i class="fas fa-check-circle"></i> <span id="toast-message">Settings saved!</span>
    </div>

    <script src="script.js"></script>
</body>
</html>